---
title: "Floodrisk and race in Washington"
author: "Ailene Ettinger, ailene.ettinger@tnc.org"
date: "1/10/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Statistical models
We want to fit a multinomial mixed model with the following variables:
-Response: Race (tract level), multinomial distribution
-Predictor: Flood Risk, at the tract level
-Random effect: county

We fit a multinomial logit model, win which we assume that the log-odds of each response (race) follow a linear model:
$$\eta_{ij} = \alpha_{j} + \beta_{j}  x_{i}  $$
where $\eta$ is race in parcel i, and x is flood risk for parcel i.

We implement the model in Stan via the brms package.

brms: mod <- brm (race ~ floodrisk + (1|county),
           data=wadat, family="categorical",
           prior=c(set_prior ("normal (0, 8)")))
         
           
## Notes and Resources
Helpful links and code:
https://stackoverflow.com/questions/21082396/multinomial-logistic-multilevel-models-in-r

https://thinkinator.com/2016/01/12/r-users-will-now-inevitably-become-bayesians/

https://data.princeton.edu/wws509/notes/c6s2

Example using the iris dataset:
brms: b1 <- brm (Species ~ Petal.Length + Petal.Width + Sepal.Length + Sepal.Width,
           data=iris, family="categorical",
           prior=c(set_prior ("normal (0, 8)")))

